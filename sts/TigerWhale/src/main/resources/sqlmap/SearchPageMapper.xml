<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.tigerWhale.searchPage.mapper.SearchPageMapper">

	<select id="getList" resultType="MainBoardVO">
		<![CDATA[
		select * 
		from (select rownum rn,
					 a.* 
			  from (select *
			  		from (select *
			  				from MAINBOARD
			  				where c_code = #{C_code})
			  		where
		]]>
					<if test="searchName == null or searchName == ''">1 = 1</if>
					<if test="searchName != null ">text like '%' || #{searchName} || '%' or title like '%'||#{searchName} or user_ID like '%'||#{searchName}||'%'</if>
		<![CDATA[
			  		order by bno desc) a
			 )
		where rn > (#{pageNum} - 1) * #{amount} and rn <= #{pageNum} * #{amount}
		]]>
	</select>
	
	<select id="getTotal" resultType="int">
		select count(*) as total
			from (select * 
			  		from MAINBOARD
			  		where c_code = #{C_code})
			  where
		<if test="searchName == null or searchName == ''">1 = 1</if>
		<if test="searchName != null ">text like '%' || #{searchName} || '%' or title like '%'||#{searchName} or user_ID like '%'||#{searchName}||'%'</if>
	</select>


</mapper>